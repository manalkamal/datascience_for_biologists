---
title: "File input/output in the `tidyverse`"
date: "Stephanie J. Spielman"
author: "Data Science for Biologists"
output: 
  html_document:
    theme: simplex
    toc: true
    toc_float: true
editor_options: 
  chunk_output_type: console
---
```{css, include=FALSE}
#TOC {
  position: fixed;
  width: 300px;
  overflow:auto;
}
blockquote {
  display: block;
  line-height: 0.8em;
  font-size: 0.5em;
  color: #6b6b6b;
  margin-left: 20px;
}
```


```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = FALSE,
  message = FALSE,
  warning = FALSE
)
library(ggplot2)
library(viridis)
library(colorblindr)
library(patchwork)
theme_set(theme_classic())
```


# Saving your `ggplot2` plots

```{r, echo=T, eval=F}
# Save your plot to a variable. Here, the variable is `iris_plot`
ggplot(iris) + 
  aes(x = Sepal.Length, y = Petal.Length) + 
  geom_point() -> iris_plot

# Use ggsave() to save `iris_plot` to the file called "file_to_save_my_plot_as.png"
ggsave("file_to_save_my_plot_as.png", 
       iris_plot,
       width = 6,
       height = 4)
```

### Use the function `ggsave()`

+ First argument: file name for plot, as a string

+ Second argument: the _variable_ that contains the plot you want to save

+ Third/fourth arguments: the width and height _in inches_ to save the figure in. **Requires trial and error!!!** It is **extremely** important to save your files in an appropriate aspect ratio.

It is extremely important to *ALWAYS* specify the plot variable. Otherwise, your code may not do what you want it to do. Consider the example below:

```{r, echo=T, eval=F}
ggplot(iris) + 
  aes(x = Sepal.Length, y = Petal.Length) + 
  geom_point() -> iris_plot

# other unsaved plot
ggplot(iris) + 
  aes(x = Sepal.Length, y = Sepal.Length) + 
  geom_point()

# saves the other unsaved plot, NOT iris_plot!!
ggsave("file_to_save_my_plot_as.png")
```

Using variables makes your code clear and unambiguous. You should never have to "guess" which plot you are saving - the code should be explicit and obvious which plot `ggsave()` saves.

You'll notice the file output has a particular extension, `".png"`. This is one of many types of image file formats. Others include jpg, bmp, svg, and pdf. Most commonly we save our plots as PDF or PNG. 

# Reading and writing data files

### We work with *delimited* data in R
If the data is delimited with a comma, we used `read_csv("filename.csv")`

If the data is delimited with a tab symbol, we use `read_tsv("filename.tsv")`. These files also commonly use the `read_tsv("filename.txt")` extension.

For other types of data that is delimited by another symbol you can use the function `read_delim("filename.txt", delim = ";")` with the extra argument,

There are base R alternatives for these functions `read.csv()` and `read.table()` - notice how these have periods and not underscores! Although there is nothing technically wrong with using these functions, they have some unexpected consequences you don't know how to deal with. **For the purposes of this class, you are not allowed to use these functions.** If/when you become more generally comfortable with R and programming and you have a full understanding of how the `readr` versions differ, *AND* you know how to address all differences yourself, please feel free to choose your own adventure!! I just ask you wait until after Spring 2021.

To write to a file we use a `write_XXX` complement as: `write_csv(dataset_variable_i_want_to_save, "file_name_to_save_the_data_in.csv")`